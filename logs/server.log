2025-04-11 12:35:12	||INFO|| main || Configuration loaded successfully || main.go
2025-04-11 12:37:16	||INFO|| main || Configuration loaded successfully || main.go
2025-04-11 12:37:16	||INFO|| main || Connected to database || main.go
2025-04-11 12:37:16	||INFO|| runServer || Starting server on port 8080 || main.go
2025-04-11 12:37:27	||INFO|| Request || Received POST request for /start-stream from [::1]:33408 || middleware.go
2025-04-11 12:37:27	||INFO|| StartStreamHandler || Received request to start stream stream3 with URL rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 || handlers.go
2025-04-11 12:37:27	||INFO|| ProcessStream || Starting to process RTSP stream: rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 || rtsp.go
2025-04-11 12:37:29	||INFO|| StartStreamHandler || Started processing stream: rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 || handlers.go
2025-04-11 12:37:29	||INFO|| Request || Completed POST /start-stream in 2.002560654s || middleware.go
2025-04-11 12:37:30	||INFO|| ProcessStream || Stream info: hasVideo=true, hasAudio=false || rtsp.go
2025-04-11 12:37:30	||INFO|| SaveStreamMetadata || Stream metadata saved for stream ID: stream3 || storage.go
2025-04-11 12:37:30	||INFO|| SaveProcessingLog || Processing log saved for stream ID: stream3 || storage.go
2025-04-11 12:37:30	||INFO|| ProcessStream || FFmpeg command: ffmpeg -fflags +genpts+discardcorrupt -use_wallclock_as_timestamps 1 -rtsp_transport tcp -buffer_size 8192k -rtsp_flags prefer_tcp -timeout 5000000 -i rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 -c:v libx264 -preset ultrafast -tune zerolatency -profile:v baseline -level 3.0 -r 30 -g 30 -keyint_min 30 -b:v 2000k -maxrate 2500k -minrate 1500k -bufsize 3000k -pix_fmt yuv420p -vsync 1 -avoid_negative_ts 1 -x264-params no-scenecut=1:bframes=0 -sc_threshold 0 -map 0:v:0 -f hls -hls_time 2 -hls_list_size 0 -hls_flags append_list+discont_start+split_by_time -hls_segment_type mpegts -hls_segment_filename hls/stream3/stream3_segment_%03d.ts -hls_init_time 0 -mpegts_flags +resend_headers -pat_period 0.1 -sdt_period 0.1 hls/stream3/stream3.m3u8 || rtsp.go
2025-04-11 12:37:32	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:37:37	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:37:37	||INFO|| Request || Received GET request for /stream/stream3 from 127.0.0.1:33366 || middleware.go
2025-04-11 12:37:37	||INFO|| StreamHandler || Processing request for: stream3, seek time: 0 || handlers.go
2025-04-11 12:37:37	||INFO|| StreamHandler || Serving active playlist: hls/stream3/stream3.m3u8 || handlers.go
2025-04-11 12:37:37	||INFO|| StreamHandler || Serving file: hls/stream3/stream3.m3u8 || handlers.go
2025-04-11 12:37:37	||INFO|| Request || Completed GET /stream/stream3 in 78.722µs || middleware.go
2025-04-11 12:37:37	||INFO|| Request || Received GET request for /stream/stream3_segment_000.ts from 127.0.0.1:33370 || middleware.go
2025-04-11 12:37:37	||INFO|| StreamHandler || Processing request for: stream3_segment_000.ts, seek time: 0 || handlers.go
2025-04-11 12:37:37	||INFO|| StreamHandler || Serving active segment: hls/stream3/stream3_segment_000.ts || handlers.go
2025-04-11 12:37:37	||INFO|| StreamHandler || Serving file: hls/stream3/stream3_segment_000.ts || handlers.go
2025-04-11 12:37:37	||INFO|| Request || Completed GET /stream/stream3_segment_000.ts in 664.781µs || middleware.go
2025-04-11 12:37:37	||INFO|| Request || Received GET request for /stream/stream3_segment_001.ts from 127.0.0.1:33374 || middleware.go
2025-04-11 12:37:37	||INFO|| StreamHandler || Processing request for: stream3_segment_001.ts, seek time: 0 || handlers.go
2025-04-11 12:37:37	||INFO|| StreamHandler || Serving active segment: hls/stream3/stream3_segment_001.ts || handlers.go
2025-04-11 12:37:37	||INFO|| StreamHandler || Serving file: hls/stream3/stream3_segment_001.ts || handlers.go
2025-04-11 12:37:37	||INFO|| Request || Completed GET /stream/stream3_segment_001.ts in 94.538µs || middleware.go
2025-04-11 12:37:37	||INFO|| Request || Received GET request for /stream/stream3_segment_002.ts from 127.0.0.1:33370 || middleware.go
2025-04-11 12:37:37	||INFO|| StreamHandler || Processing request for: stream3_segment_002.ts, seek time: 0 || handlers.go
2025-04-11 12:37:37	||INFO|| StreamHandler || Serving active segment: hls/stream3/stream3_segment_002.ts || handlers.go
2025-04-11 12:37:37	||INFO|| StreamHandler || Serving file: hls/stream3/stream3_segment_002.ts || handlers.go
2025-04-11 12:37:37	||INFO|| Request || Completed GET /stream/stream3_segment_002.ts in 209.815µs || middleware.go
2025-04-11 12:37:39	||INFO|| Request || Received GET request for /stream/stream3 from 127.0.0.1:33378 || middleware.go
2025-04-11 12:37:39	||INFO|| StreamHandler || Processing request for: stream3, seek time: 0 || handlers.go
2025-04-11 12:37:39	||INFO|| StreamHandler || Serving active playlist: hls/stream3/stream3.m3u8 || handlers.go
2025-04-11 12:37:39	||INFO|| StreamHandler || Serving file: hls/stream3/stream3.m3u8 || handlers.go
2025-04-11 12:37:39	||INFO|| Request || Completed GET /stream/stream3 in 60.628µs || middleware.go
2025-04-11 12:37:39	||INFO|| Request || Received GET request for /stream/stream3_segment_003.ts from 127.0.0.1:33374 || middleware.go
2025-04-11 12:37:39	||INFO|| StreamHandler || Processing request for: stream3_segment_003.ts, seek time: 0 || handlers.go
2025-04-11 12:37:39	||INFO|| StreamHandler || Serving active segment: hls/stream3/stream3_segment_003.ts || handlers.go
2025-04-11 12:37:39	||INFO|| StreamHandler || Serving file: hls/stream3/stream3_segment_003.ts || handlers.go
2025-04-11 12:37:39	||INFO|| Request || Completed GET /stream/stream3_segment_003.ts in 180.063µs || middleware.go
2025-04-11 12:37:42	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:37:43	||INFO|| Request || Received GET request for /stream/stream3 from 127.0.0.1:33378 || middleware.go
2025-04-11 12:37:43	||INFO|| StreamHandler || Processing request for: stream3, seek time: 0 || handlers.go
2025-04-11 12:37:43	||INFO|| StreamHandler || Serving active playlist: hls/stream3/stream3.m3u8 || handlers.go
2025-04-11 12:37:43	||INFO|| StreamHandler || Serving file: hls/stream3/stream3.m3u8 || handlers.go
2025-04-11 12:37:43	||INFO|| Request || Completed GET /stream/stream3 in 59.218µs || middleware.go
2025-04-11 12:37:43	||INFO|| Request || Received GET request for /stream/stream3_segment_004.ts from 127.0.0.1:33374 || middleware.go
2025-04-11 12:37:43	||INFO|| StreamHandler || Processing request for: stream3_segment_004.ts, seek time: 0 || handlers.go
2025-04-11 12:37:43	||INFO|| StreamHandler || Serving active segment: hls/stream3/stream3_segment_004.ts || handlers.go
2025-04-11 12:37:43	||INFO|| StreamHandler || Serving file: hls/stream3/stream3_segment_004.ts || handlers.go
2025-04-11 12:37:43	||INFO|| Request || Received GET request for /stream/stream3_segment_005.ts from 127.0.0.1:33370 || middleware.go
2025-04-11 12:37:43	||INFO|| StreamHandler || Processing request for: stream3_segment_005.ts, seek time: 0 || handlers.go
2025-04-11 12:37:43	||INFO|| StreamHandler || Serving active segment: hls/stream3/stream3_segment_005.ts || handlers.go
2025-04-11 12:37:43	||INFO|| StreamHandler || Serving file: hls/stream3/stream3_segment_005.ts || handlers.go
2025-04-11 12:37:43	||INFO|| Request || Completed GET /stream/stream3_segment_004.ts in 156.931µs || middleware.go
2025-04-11 12:37:43	||INFO|| Request || Completed GET /stream/stream3_segment_005.ts in 151.999µs || middleware.go
2025-04-11 12:37:47	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:37:47	||INFO|| Request || Received GET request for /stream/stream3 from 127.0.0.1:33378 || middleware.go
2025-04-11 12:37:47	||INFO|| StreamHandler || Processing request for: stream3, seek time: 0 || handlers.go
2025-04-11 12:37:47	||INFO|| StreamHandler || Serving active playlist: hls/stream3/stream3.m3u8 || handlers.go
2025-04-11 12:37:47	||INFO|| StreamHandler || Serving file: hls/stream3/stream3.m3u8 || handlers.go
2025-04-11 12:37:47	||INFO|| Request || Completed GET /stream/stream3 in 87.544µs || middleware.go
2025-04-11 12:37:47	||INFO|| Request || Received GET request for /stream/stream3_segment_006.ts from 127.0.0.1:33370 || middleware.go
2025-04-11 12:37:47	||INFO|| StreamHandler || Processing request for: stream3_segment_006.ts, seek time: 0 || handlers.go
2025-04-11 12:37:47	||INFO|| StreamHandler || Serving active segment: hls/stream3/stream3_segment_006.ts || handlers.go
2025-04-11 12:37:47	||INFO|| StreamHandler || Serving file: hls/stream3/stream3_segment_006.ts || handlers.go
2025-04-11 12:37:47	||INFO|| Request || Completed GET /stream/stream3_segment_006.ts in 13.850359ms || middleware.go
2025-04-11 12:37:47	||INFO|| Request || Received GET request for /stream/stream3_segment_007.ts from 127.0.0.1:33374 || middleware.go
2025-04-11 12:37:47	||INFO|| StreamHandler || Processing request for: stream3_segment_007.ts, seek time: 0 || handlers.go
2025-04-11 12:37:47	||INFO|| StreamHandler || Serving active segment: hls/stream3/stream3_segment_007.ts || handlers.go
2025-04-11 12:37:47	||INFO|| StreamHandler || Serving file: hls/stream3/stream3_segment_007.ts || handlers.go
2025-04-11 12:37:47	||INFO|| Request || Completed GET /stream/stream3_segment_007.ts in 153.063µs || middleware.go
2025-04-11 12:37:51	||INFO|| Request || Received GET request for /stream/stream3 from 127.0.0.1:33378 || middleware.go
2025-04-11 12:37:51	||INFO|| StreamHandler || Processing request for: stream3, seek time: 0 || handlers.go
2025-04-11 12:37:51	||INFO|| StreamHandler || Serving active playlist: hls/stream3/stream3.m3u8 || handlers.go
2025-04-11 12:37:51	||INFO|| StreamHandler || Serving file: hls/stream3/stream3.m3u8 || handlers.go
2025-04-11 12:37:51	||INFO|| Request || Completed GET /stream/stream3 in 140.365µs || middleware.go
2025-04-11 12:37:51	||INFO|| Request || Received GET request for /stream/stream3_segment_008.ts from 127.0.0.1:33374 || middleware.go
2025-04-11 12:37:51	||INFO|| StreamHandler || Processing request for: stream3_segment_008.ts, seek time: 0 || handlers.go
2025-04-11 12:37:51	||INFO|| StreamHandler || Serving active segment: hls/stream3/stream3_segment_008.ts || handlers.go
2025-04-11 12:37:51	||INFO|| StreamHandler || Serving file: hls/stream3/stream3_segment_008.ts || handlers.go
2025-04-11 12:37:51	||INFO|| Request || Received GET request for /stream/stream3_segment_009.ts from 127.0.0.1:33370 || middleware.go
2025-04-11 12:37:51	||INFO|| StreamHandler || Processing request for: stream3_segment_009.ts, seek time: 0 || handlers.go
2025-04-11 12:37:51	||INFO|| StreamHandler || Serving active segment: hls/stream3/stream3_segment_009.ts || handlers.go
2025-04-11 12:37:51	||INFO|| StreamHandler || Serving file: hls/stream3/stream3_segment_009.ts || handlers.go
2025-04-11 12:37:51	||INFO|| Request || Completed GET /stream/stream3_segment_008.ts in 155.868µs || middleware.go
2025-04-11 12:37:51	||INFO|| Request || Completed GET /stream/stream3_segment_009.ts in 123.996µs || middleware.go
2025-04-11 12:37:52	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:37:55	||INFO|| Request || Received GET request for /stream/stream3 from 127.0.0.1:33378 || middleware.go
2025-04-11 12:37:55	||INFO|| StreamHandler || Processing request for: stream3, seek time: 0 || handlers.go
2025-04-11 12:37:55	||INFO|| StreamHandler || Serving active playlist: hls/stream3/stream3.m3u8 || handlers.go
2025-04-11 12:37:55	||INFO|| StreamHandler || Serving file: hls/stream3/stream3.m3u8 || handlers.go
2025-04-11 12:37:55	||INFO|| Request || Completed GET /stream/stream3 in 117.245µs || middleware.go
2025-04-11 12:37:55	||INFO|| Request || Received GET request for /stream/stream3_segment_010.ts from 127.0.0.1:33370 || middleware.go
2025-04-11 12:37:55	||INFO|| StreamHandler || Processing request for: stream3_segment_010.ts, seek time: 0 || handlers.go
2025-04-11 12:37:55	||INFO|| StreamHandler || Serving active segment: hls/stream3/stream3_segment_010.ts || handlers.go
2025-04-11 12:37:55	||INFO|| StreamHandler || Serving file: hls/stream3/stream3_segment_010.ts || handlers.go
2025-04-11 12:37:55	||INFO|| Request || Received GET request for /stream/stream3_segment_011.ts from 127.0.0.1:33374 || middleware.go
2025-04-11 12:37:55	||INFO|| StreamHandler || Processing request for: stream3_segment_011.ts, seek time: 0 || handlers.go
2025-04-11 12:37:55	||INFO|| StreamHandler || Serving active segment: hls/stream3/stream3_segment_011.ts || handlers.go
2025-04-11 12:37:55	||INFO|| StreamHandler || Serving file: hls/stream3/stream3_segment_011.ts || handlers.go
2025-04-11 12:37:55	||INFO|| Request || Completed GET /stream/stream3_segment_010.ts in 166.471µs || middleware.go
2025-04-11 12:37:55	||INFO|| Request || Completed GET /stream/stream3_segment_011.ts in 164.765µs || middleware.go
2025-04-11 12:37:57	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:38:02	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:38:07	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:38:09	||INFO|| Request || Received POST request for /stop-stream from [::1]:38276 || middleware.go
2025-04-11 12:38:09	||INFO|| SaveArchiveEntry || Archive entry saved for stream ID: stream3 || storage.go
2025-04-11 12:38:09	||INFO|| StopStreamHandler || Stopped stream: stream3 || handlers.go
2025-04-11 12:38:09	||INFO|| Request || Completed POST /stop-stream in 1.270047ms || middleware.go
2025-04-11 12:41:00	||INFO|| Request || Received GET request for /list-streams from [::1]:37164 || middleware.go
2025-04-11 12:41:00	||INFO|| Request || Completed GET /list-streams in 70.218µs || middleware.go
2025-04-11 12:46:34	||INFO|| main || Received shutdown signal, shutting down server... || main.go
2025-04-11 12:46:34	||INFO|| main || Server shut down gracefully || main.go
2025-04-11 12:46:35	||INFO|| main || Configuration loaded successfully || main.go
2025-04-11 12:46:35	||INFO|| main || Connected to database || main.go
2025-04-11 12:46:35	||INFO|| runServer || Starting server on port 8080 || main.go
2025-04-11 12:46:39	||INFO|| Request || Received POST request for /start-stream from [::1]:42926 || middleware.go
2025-04-11 12:46:39	||INFO|| StartStreamHandler || Received request to start stream stream3 with URL rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 || handlers.go
2025-04-11 12:46:39	||INFO|| ProcessStream || Starting to process RTSP stream: rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 || rtsp.go
2025-04-11 12:46:41	||INFO|| StartStreamHandler || Started processing stream: rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 || handlers.go
2025-04-11 12:46:41	||INFO|| Request || Completed POST /start-stream in 2.000147624s || middleware.go
2025-04-11 12:46:42	||INFO|| ProcessStream || Stream info: hasVideo=true, hasAudio=false || rtsp.go
2025-04-11 12:46:42	||INFO|| ProcessStream || Checking database connection before saving metadata || rtsp.go
2025-04-11 12:46:42	||INFO|| ProcessStream || Saving stream metadata for streamID stream3 || rtsp.go
2025-04-11 12:46:42	||INFO|| SaveStreamMetadata || Stream metadata saved for stream ID: stream3 || storage.go
2025-04-11 12:46:42	||INFO|| ProcessStream || Stream metadata saved successfully || rtsp.go
2025-04-11 12:46:42	||INFO|| ProcessStream || Saving processing log for streamID stream3 || rtsp.go
2025-04-11 12:46:42	||INFO|| SaveProcessingLog || Processing log saved for stream ID: stream3 || storage.go
2025-04-11 12:46:42	||INFO|| ProcessStream || Processing log saved successfully || rtsp.go
2025-04-11 12:46:42	||INFO|| ProcessStream || FFmpeg command: ffmpeg -fflags +genpts+discardcorrupt -use_wallclock_as_timestamps 1 -rtsp_transport tcp -buffer_size 8192k -rtsp_flags prefer_tcp -timeout 5000000 -i rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 -c:v libx264 -preset ultrafast -tune zerolatency -profile:v baseline -level 3.0 -r 30 -g 30 -keyint_min 30 -b:v 2000k -maxrate 2500k -minrate 1500k -bufsize 3000k -pix_fmt yuv420p -vsync 1 -avoid_negative_ts 1 -x264-params no-scenecut=1:bframes=0 -sc_threshold 0 -map 0:v:0 -f hls -hls_time 2 -hls_list_size 0 -hls_flags append_list+discont_start+split_by_time -hls_segment_type mpegts -hls_segment_filename hls/stream3/stream3_segment_%03d.ts -hls_init_time 0 -mpegts_flags +resend_headers -pat_period 0.1 -sdt_period 0.1 hls/stream3/stream3.m3u8 || rtsp.go
2025-04-11 12:46:44	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:46:49	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:46:54	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:46:59	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:47:04	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:47:09	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:47:14	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:47:18	||INFO|| main || Received shutdown signal, shutting down server... || main.go
2025-04-11 12:47:18	||INFO|| main || Server shut down gracefully || main.go
2025-04-11 12:47:18	||ERROR|| ProcessStream || Failed to record video with FFmpeg: exit status 255, FFmpeg output: ffmpeg version 6.1.1-3ubuntu5 Copyright (c) 2000-2023 the FFmpeg developers
  built with gcc 13 (Ubuntu 13.2.0-23ubuntu3)
  configuration: --prefix=/usr --extra-version=3ubuntu5 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --arch=amd64 --enable-gpl --disable-stripping --disable-omx --enable-gnutls --enable-libaom --enable-libass --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libharfbuzz --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-openal --enable-opencl --enable-opengl --disable-sndio --enable-libvpl --disable-libmfx --enable-libdc1394 --enable-libdrm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-ladspa --enable-libbluray --enable-libjack --enable-libpulse --enable-librabbitmq --enable-librist --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libx264 --enable-libzmq --enable-libzvbi --enable-lv2 --enable-sdl2 --enable-libplacebo --enable-librav1e --enable-pocketsphinx --enable-librsvg --enable-libjxl --enable-shared
  libavutil      58. 29.100 / 58. 29.100
  libavcodec     60. 31.102 / 60. 31.102
  libavformat    60. 16.100 / 60. 16.100
  libavdevice    60.  3.100 / 60.  3.100
  libavfilter     9. 12.100 /  9. 12.100
  libswscale      7.  5.100 /  7.  5.100
  libswresample   4. 12.100 /  4. 12.100
  libpostproc    57.  3.100 / 57.  3.100
-vsync is deprecated. Use -fps_mode
Passing a number to -vsync is deprecated, use a string argument as described in the manual.
Input #0, rtsp, from 'rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101':
  Metadata:
    title           : Media Presentation
  Duration: N/A, start: 1744364802.816933, bitrate: N/A
  Stream #0:0: Video: hevc (Main), yuvj420p(pc, bt709), 1920x1080, 25 fps, 25 tbr, 90k tbn
Stream mapping:
  Stream #0:0 -> #0:0 (hevc (native) -> h264 (libx264))
Press [q] to stop, [?] for help
[swscaler @ 0x58051e5bfdc0] deprecated pixel format used, make sure you did set range correctly
[swscaler @ 0x58051e5cd080] deprecated pixel format used, make sure you did set range correctly
[swscaler @ 0x58051e72d140] deprecated pixel format used, make sure you did set range correctly
    Last message repeated 1 times
[libx264 @ 0x58051d3d7840] frame MB size (120x68) > level limit (1620)
[libx264 @ 0x58051d3d7840] DPB size (1 frames, 8160 mbs) > level limit (0 frames, 8100 mbs)
[libx264 @ 0x58051d3d7840] MB rate (244800) > level limit (40500)
[libx264 @ 0x58051d3d7840] using cpu capabilities: MMX2 SSE2Fast SSSE3 SSE4.2 AVX FMA3 BMI2 AVX2
[libx264 @ 0x58051d3d7840] profile Constrained Baseline, level 3.0, 4:2:0, 8-bit
[libx264 @ 0x58051d3d7840] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=0 ref=1 deblock=0:0:0 analyse=0:0 me=dia subme=0 psy=1 psy_rd=1.00:0.00 mixed_ref=0 me_range=16 chroma_me=1 trellis=0 8x8dct=0 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=0 threads=12 lookahead_threads=12 sliced_threads=1 slices=12 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=0 weightp=0 keyint=30 keyint_min=16 scenecut=0 intra_refresh=0 rc_lookahead=0 rc=abr mbtree=0 bitrate=2000 ratetol=1.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 vbv_maxrate=2500 vbv_bufsize=3000 nal_hrd=none filler=0 ip_ratio=1.40 aq=0
Output #0, hls, to 'hls/stream3/stream3.m3u8':
  Metadata:
    title           : Media Presentation
    encoder         : Lavf60.16.100
  Stream #0:0: Video: h264, yuv420p(tv, bt709, progressive), 1920x1080, q=2-31, 2000 kb/s, 30 fps, 90k tbn
    Metadata:
      encoder         : Lavc60.31.102 libx264
    Side data:
      cpb: bitrate max/min/avg: 2500000/0/2000000 buffer size: 3000000 vbv_delay: N/A
frame=    0 fps=0.0 q=40.0 size=       0kB time=00:00:00.00 bitrate=N/A speed=   0x    frame=   30 fps=0.0 q=34.0 size=N/A time=00:00:00.96 bitrate=N/A dup=5 drop=0 speed=1.69x    frame=   44 fps= 40 q=32.0 size=N/A time=00:00:01.46 bitrate=N/A dup=7 drop=0 speed=1.33x    frame=   59 fps= 37 q=42.0 size=N/A time=00:00:01.96 bitrate=N/A dup=9 drop=0 speed=1.22x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_272.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=   75 fps= 35 q=35.0 size=N/A time=00:00:02.50 bitrate=N/A dup=12 drop=0 speed=1.17x    frame=   92 fps= 34 q=41.0 size=N/A time=00:00:03.06 bitrate=N/A dup=15 drop=0 speed=1.14x    frame=  107 fps= 33 q=41.0 size=N/A time=00:00:03.56 bitrate=N/A dup=17 drop=0 speed=1.11x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_273.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  125 fps= 33 q=39.0 size=N/A time=00:00:04.13 bitrate=N/A dup=20 drop=0 speed=1.09x    frame=  141 fps= 33 q=33.0 size=N/A time=00:00:04.66 bitrate=N/A dup=23 drop=0 speed=1.09x    frame=  157 fps= 33 q=39.0 size=N/A time=00:00:05.20 bitrate=N/A dup=26 drop=0 speed=1.08x    frame=  171 fps= 32 q=34.0 size=N/A time=00:00:05.70 bitrate=N/A dup=28 drop=0 speed=1.07x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_274.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  188 fps= 32 q=35.0 size=N/A time=00:00:06.23 bitrate=N/A dup=31 drop=0 speed=1.06x    frame=  204 fps= 32 q=35.0 size=N/A time=00:00:06.76 bitrate=N/A dup=34 drop=0 speed=1.06x    frame=  218 fps= 32 q=38.0 size=N/A time=00:00:07.26 bitrate=N/A dup=36 drop=0 speed=1.05x    frame=  235 fps= 32 q=35.0 size=N/A time=00:00:07.80 bitrate=N/A dup=39 drop=0 speed=1.05x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_275.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  250 fps= 31 q=34.0 size=N/A time=00:00:08.33 bitrate=N/A dup=42 drop=0 speed=1.05x    frame=  265 fps= 31 q=38.0 size=N/A time=00:00:08.83 bitrate=N/A dup=44 drop=0 speed=1.04x    frame=  281 fps= 31 q=34.0 size=N/A time=00:00:09.36 bitrate=N/A dup=47 drop=0 speed=1.04x    frame=  296 fps= 31 q=33.0 size=N/A time=00:00:09.86 bitrate=N/A dup=49 drop=0 speed=1.04x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_276.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  312 fps= 31 q=40.0 size=N/A time=00:00:10.40 bitrate=N/A dup=52 drop=0 speed=1.04x    frame=  327 fps= 31 q=35.0 size=N/A time=00:00:10.90 bitrate=N/A dup=54 drop=0 speed=1.03x    frame=  343 fps= 31 q=35.0 size=N/A time=00:00:11.43 bitrate=N/A dup=57 drop=0 speed=1.03x    frame=  359 fps= 31 q=32.0 size=N/A time=00:00:11.96 bitrate=N/A dup=60 drop=0 speed=1.03x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_277.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  376 fps= 31 q=34.0 size=N/A time=00:00:12.50 bitrate=N/A dup=63 drop=0 speed=1.03x    frame=  389 fps= 31 q=34.0 size=N/A time=00:00:12.96 bitrate=N/A dup=65 drop=0 speed=1.03x    frame=  406 fps= 31 q=32.0 size=N/A time=00:00:13.50 bitrate=N/A dup=68 drop=0 speed=1.03x    frame=  420 fps= 31 q=32.0 size=N/A time=00:00:14.00 bitrate=N/A dup=70 drop=0 speed=1.03x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_278.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  436 fps= 31 q=33.0 size=N/A time=00:00:14.53 bitrate=N/A dup=73 drop=0 speed=1.03x    frame=  453 fps= 31 q=39.0 size=N/A time=00:00:15.06 bitrate=N/A dup=76 drop=0 speed=1.03x    frame=  468 fps= 31 q=38.0 size=N/A time=00:00:15.56 bitrate=N/A dup=78 drop=0 speed=1.02x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_279.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  484 fps= 31 q=38.0 size=N/A time=00:00:16.10 bitrate=N/A dup=81 drop=0 speed=1.02x    frame=  497 fps= 31 q=35.0 size=N/A time=00:00:16.56 bitrate=N/A dup=83 drop=0 speed=1.02x    frame=  513 fps= 31 q=40.0 size=N/A time=00:00:17.10 bitrate=N/A dup=86 drop=0 speed=1.02x    frame=  530 fps= 31 q=39.0 size=N/A time=00:00:17.63 bitrate=N/A dup=89 drop=0 speed=1.02x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_280.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  544 fps= 31 q=37.0 size=N/A time=00:00:18.13 bitrate=N/A dup=91 drop=0 speed=1.02x    frame=  560 fps= 31 q=35.0 size=N/A time=00:00:18.66 bitrate=N/A dup=94 drop=0 speed=1.02x    frame=  575 fps= 31 q=36.0 size=N/A time=00:00:19.16 bitrate=N/A dup=96 drop=0 speed=1.02x    frame=  591 fps= 31 q=37.0 size=N/A time=00:00:19.70 bitrate=N/A dup=99 drop=0 speed=1.02x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_281.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  608 fps= 31 q=33.0 size=N/A time=00:00:20.23 bitrate=N/A dup=102 drop=0 speed=1.02x    frame=  624 fps= 31 q=33.0 size=N/A time=00:00:20.76 bitrate=N/A dup=105 drop=0 speed=1.02x    frame=  638 fps= 31 q=39.0 size=N/A time=00:00:21.26 bitrate=N/A dup=107 drop=0 speed=1.02x    frame=  654 fps= 31 q=35.0 size=N/A time=00:00:21.80 bitrate=N/A dup=110 drop=0 speed=1.02x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_282.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  670 fps= 30 q=36.0 size=N/A time=00:00:22.33 bitrate=N/A dup=112 drop=0 speed=1.02x    frame=  686 fps= 31 q=38.0 size=N/A time=00:00:22.86 bitrate=N/A dup=115 drop=0 speed=1.02x    frame=  703 fps= 31 q=35.0 size=N/A time=00:00:23.40 bitrate=N/A dup=118 drop=0 speed=1.02x    frame=  720 fps= 31 q=34.0 size=N/A time=00:00:23.96 bitrate=N/A dup=121 drop=0 speed=1.02x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_283.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  734 fps= 30 q=38.0 size=N/A time=00:00:24.46 bitrate=N/A dup=123 drop=0 speed=1.01x    frame=  750 fps= 30 q=35.0 size=N/A time=00:00:25.00 bitrate=N/A dup=126 drop=0 speed=1.02x    frame=  767 fps= 31 q=34.0 size=N/A time=00:00:25.53 bitrate=N/A dup=129 drop=0 speed=1.02x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_284.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  781 fps= 30 q=44.0 size=N/A time=00:00:26.03 bitrate=N/A dup=131 drop=0 speed=1.01x    frame=  797 fps= 30 q=36.0 size=N/A time=00:00:26.56 bitrate=N/A dup=134 drop=0 speed=1.01x    frame=  812 fps= 30 q=41.0 size=N/A time=00:00:27.06 bitrate=N/A dup=136 drop=0 speed=1.01x    frame=  829 fps= 30 q=35.0 size=N/A time=00:00:27.60 bitrate=N/A dup=139 drop=0 speed=1.01x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_285.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  844 fps= 30 q=38.0 size=N/A time=00:00:28.13 bitrate=N/A dup=142 drop=0 speed=1.01x    frame=  859 fps= 30 q=35.0 size=N/A time=00:00:28.63 bitrate=N/A dup=144 drop=0 speed=1.01x    frame=  875 fps= 30 q=37.0 size=N/A time=00:00:29.16 bitrate=N/A dup=147 drop=0 speed=1.01x    frame=  892 fps= 30 q=39.0 size=N/A time=00:00:29.70 bitrate=N/A dup=150 drop=0 speed=1.01x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_286.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  908 fps= 30 q=36.0 size=N/A time=00:00:30.23 bitrate=N/A dup=153 drop=0 speed=1.01x    frame=  923 fps= 30 q=35.0 size=N/A time=00:00:30.73 bitrate=N/A dup=155 drop=0 speed=1.01x    frame=  937 fps= 30 q=42.0 size=N/A time=00:00:31.23 bitrate=N/A dup=157 drop=0 speed=1.01x    frame=  953 fps= 30 q=38.0 size=N/A time=00:00:31.76 bitrate=N/A dup=160 drop=0 speed=1.01x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_287.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  969 fps= 30 q=36.0 size=N/A time=00:00:32.30 bitrate=N/A dup=163 drop=0 speed=1.01x    frame=  986 fps= 30 q=35.0 size=N/A time=00:00:32.83 bitrate=N/A dup=166 drop=0 speed=1.01x    frame= 1001 fps= 30 q=39.0 size=N/A time=00:00:33.33 bitrate=N/A dup=168 drop=0 speed=1.01x    frame= 1016 fps= 30 q=35.0 size=N/A time=00:00:33.86 bitrate=N/A dup=171 drop=0 speed=1.01x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_288.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame= 1031 fps= 30 q=36.0 size=N/A time=00:00:34.36 bitrate=N/A dup=173 drop=0 speed=1.01x    frame= 1047 fps= 30 q=40.0 size=N/A time=00:00:34.90 bitrate=N/A dup=176 drop=0 speed=1.01x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_289.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
[out#0/hls @ 0x58051d38f4c0] video:9583kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown
frame= 1054 fps= 30 q=40.0 Lsize=N/A time=00:00:35.10 bitrate=N/A dup=177 drop=0 speed=1.01x    
[libx264 @ 0x58051d3d7840] frame I:36    Avg QP:33.75  size:107676
[libx264 @ 0x58051d3d7840] frame P:1018  Avg QP:36.89  size:  5831
[libx264 @ 0x58051d3d7840] mb I  I16..4: 100.0%  0.0%  0.0%
[libx264 @ 0x58051d3d7840] mb P  I16..4:  1.3%  0.0%  0.0%  P16..4: 13.2%  0.0%  0.0%  0.0%  0.0%    skip:85.5%
[libx264 @ 0x58051d3d7840] coded y,uvDC,uvAC intra: 42.0% 21.0% 3.7% inter: 4.3% 2.6% 0.0%
[libx264 @ 0x58051d3d7840] i16 v,h,dc,p: 26% 35% 28% 11%
[libx264 @ 0x58051d3d7840] i8c dc,h,v,p: 70% 16% 11%  3%
[libx264 @ 0x58051d3d7840] kb/s:2234.26
Exiting normally, received signal 2.
 || rtsp.go
2025-04-11 12:47:18	||INFO|| ProcessStream || FFmpeg recording process for stream stream3 completed || rtsp.go
2025-04-11 12:47:18	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:47:18	||ERROR|| StartStream || Failed to process stream stream3: failed to record video: exit status 255, FFmpeg output: ffmpeg version 6.1.1-3ubuntu5 Copyright (c) 2000-2023 the FFmpeg developers
  built with gcc 13 (Ubuntu 13.2.0-23ubuntu3)
  configuration: --prefix=/usr --extra-version=3ubuntu5 --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --arch=amd64 --enable-gpl --disable-stripping --disable-omx --enable-gnutls --enable-libaom --enable-libass --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libcodec2 --enable-libdav1d --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libglslang --enable-libgme --enable-libgsm --enable-libharfbuzz --enable-libmp3lame --enable-libmysofa --enable-libopenjpeg --enable-libopenmpt --enable-libopus --enable-librubberband --enable-libshine --enable-libsnappy --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx265 --enable-libxml2 --enable-libxvid --enable-libzimg --enable-openal --enable-opencl --enable-opengl --disable-sndio --enable-libvpl --disable-libmfx --enable-libdc1394 --enable-libdrm --enable-libiec61883 --enable-chromaprint --enable-frei0r --enable-ladspa --enable-libbluray --enable-libjack --enable-libpulse --enable-librabbitmq --enable-librist --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libx264 --enable-libzmq --enable-libzvbi --enable-lv2 --enable-sdl2 --enable-libplacebo --enable-librav1e --enable-pocketsphinx --enable-librsvg --enable-libjxl --enable-shared
  libavutil      58. 29.100 / 58. 29.100
  libavcodec     60. 31.102 / 60. 31.102
  libavformat    60. 16.100 / 60. 16.100
  libavdevice    60.  3.100 / 60.  3.100
  libavfilter     9. 12.100 /  9. 12.100
  libswscale      7.  5.100 /  7.  5.100
  libswresample   4. 12.100 /  4. 12.100
  libpostproc    57.  3.100 / 57.  3.100
-vsync is deprecated. Use -fps_mode
Passing a number to -vsync is deprecated, use a string argument as described in the manual.
Input #0, rtsp, from 'rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101':
  Metadata:
    title           : Media Presentation
  Duration: N/A, start: 1744364802.816933, bitrate: N/A
  Stream #0:0: Video: hevc (Main), yuvj420p(pc, bt709), 1920x1080, 25 fps, 25 tbr, 90k tbn
Stream mapping:
  Stream #0:0 -> #0:0 (hevc (native) -> h264 (libx264))
Press [q] to stop, [?] for help
[swscaler @ 0x58051e5bfdc0] deprecated pixel format used, make sure you did set range correctly
[swscaler @ 0x58051e5cd080] deprecated pixel format used, make sure you did set range correctly
[swscaler @ 0x58051e72d140] deprecated pixel format used, make sure you did set range correctly
    Last message repeated 1 times
[libx264 @ 0x58051d3d7840] frame MB size (120x68) > level limit (1620)
[libx264 @ 0x58051d3d7840] DPB size (1 frames, 8160 mbs) > level limit (0 frames, 8100 mbs)
[libx264 @ 0x58051d3d7840] MB rate (244800) > level limit (40500)
[libx264 @ 0x58051d3d7840] using cpu capabilities: MMX2 SSE2Fast SSSE3 SSE4.2 AVX FMA3 BMI2 AVX2
[libx264 @ 0x58051d3d7840] profile Constrained Baseline, level 3.0, 4:2:0, 8-bit
[libx264 @ 0x58051d3d7840] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=0 ref=1 deblock=0:0:0 analyse=0:0 me=dia subme=0 psy=1 psy_rd=1.00:0.00 mixed_ref=0 me_range=16 chroma_me=1 trellis=0 8x8dct=0 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=0 threads=12 lookahead_threads=12 sliced_threads=1 slices=12 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=0 weightp=0 keyint=30 keyint_min=16 scenecut=0 intra_refresh=0 rc_lookahead=0 rc=abr mbtree=0 bitrate=2000 ratetol=1.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 vbv_maxrate=2500 vbv_bufsize=3000 nal_hrd=none filler=0 ip_ratio=1.40 aq=0
Output #0, hls, to 'hls/stream3/stream3.m3u8':
  Metadata:
    title           : Media Presentation
    encoder         : Lavf60.16.100
  Stream #0:0: Video: h264, yuv420p(tv, bt709, progressive), 1920x1080, q=2-31, 2000 kb/s, 30 fps, 90k tbn
    Metadata:
      encoder         : Lavc60.31.102 libx264
    Side data:
      cpb: bitrate max/min/avg: 2500000/0/2000000 buffer size: 3000000 vbv_delay: N/A
frame=    0 fps=0.0 q=40.0 size=       0kB time=00:00:00.00 bitrate=N/A speed=   0x    frame=   30 fps=0.0 q=34.0 size=N/A time=00:00:00.96 bitrate=N/A dup=5 drop=0 speed=1.69x    frame=   44 fps= 40 q=32.0 size=N/A time=00:00:01.46 bitrate=N/A dup=7 drop=0 speed=1.33x    frame=   59 fps= 37 q=42.0 size=N/A time=00:00:01.96 bitrate=N/A dup=9 drop=0 speed=1.22x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_272.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=   75 fps= 35 q=35.0 size=N/A time=00:00:02.50 bitrate=N/A dup=12 drop=0 speed=1.17x    frame=   92 fps= 34 q=41.0 size=N/A time=00:00:03.06 bitrate=N/A dup=15 drop=0 speed=1.14x    frame=  107 fps= 33 q=41.0 size=N/A time=00:00:03.56 bitrate=N/A dup=17 drop=0 speed=1.11x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_273.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  125 fps= 33 q=39.0 size=N/A time=00:00:04.13 bitrate=N/A dup=20 drop=0 speed=1.09x    frame=  141 fps= 33 q=33.0 size=N/A time=00:00:04.66 bitrate=N/A dup=23 drop=0 speed=1.09x    frame=  157 fps= 33 q=39.0 size=N/A time=00:00:05.20 bitrate=N/A dup=26 drop=0 speed=1.08x    frame=  171 fps= 32 q=34.0 size=N/A time=00:00:05.70 bitrate=N/A dup=28 drop=0 speed=1.07x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_274.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  188 fps= 32 q=35.0 size=N/A time=00:00:06.23 bitrate=N/A dup=31 drop=0 speed=1.06x    frame=  204 fps= 32 q=35.0 size=N/A time=00:00:06.76 bitrate=N/A dup=34 drop=0 speed=1.06x    frame=  218 fps= 32 q=38.0 size=N/A time=00:00:07.26 bitrate=N/A dup=36 drop=0 speed=1.05x    frame=  235 fps= 32 q=35.0 size=N/A time=00:00:07.80 bitrate=N/A dup=39 drop=0 speed=1.05x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_275.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  250 fps= 31 q=34.0 size=N/A time=00:00:08.33 bitrate=N/A dup=42 drop=0 speed=1.05x    frame=  265 fps= 31 q=38.0 size=N/A time=00:00:08.83 bitrate=N/A dup=44 drop=0 speed=1.04x    frame=  281 fps= 31 q=34.0 size=N/A time=00:00:09.36 bitrate=N/A dup=47 drop=0 speed=1.04x    frame=  296 fps= 31 q=33.0 size=N/A time=00:00:09.86 bitrate=N/A dup=49 drop=0 speed=1.04x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_276.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  312 fps= 31 q=40.0 size=N/A time=00:00:10.40 bitrate=N/A dup=52 drop=0 speed=1.04x    frame=  327 fps= 31 q=35.0 size=N/A time=00:00:10.90 bitrate=N/A dup=54 drop=0 speed=1.03x    frame=  343 fps= 31 q=35.0 size=N/A time=00:00:11.43 bitrate=N/A dup=57 drop=0 speed=1.03x    frame=  359 fps= 31 q=32.0 size=N/A time=00:00:11.96 bitrate=N/A dup=60 drop=0 speed=1.03x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_277.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  376 fps= 31 q=34.0 size=N/A time=00:00:12.50 bitrate=N/A dup=63 drop=0 speed=1.03x    frame=  389 fps= 31 q=34.0 size=N/A time=00:00:12.96 bitrate=N/A dup=65 drop=0 speed=1.03x    frame=  406 fps= 31 q=32.0 size=N/A time=00:00:13.50 bitrate=N/A dup=68 drop=0 speed=1.03x    frame=  420 fps= 31 q=32.0 size=N/A time=00:00:14.00 bitrate=N/A dup=70 drop=0 speed=1.03x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_278.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  436 fps= 31 q=33.0 size=N/A time=00:00:14.53 bitrate=N/A dup=73 drop=0 speed=1.03x    frame=  453 fps= 31 q=39.0 size=N/A time=00:00:15.06 bitrate=N/A dup=76 drop=0 speed=1.03x    frame=  468 fps= 31 q=38.0 size=N/A time=00:00:15.56 bitrate=N/A dup=78 drop=0 speed=1.02x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_279.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  484 fps= 31 q=38.0 size=N/A time=00:00:16.10 bitrate=N/A dup=81 drop=0 speed=1.02x    frame=  497 fps= 31 q=35.0 size=N/A time=00:00:16.56 bitrate=N/A dup=83 drop=0 speed=1.02x    frame=  513 fps= 31 q=40.0 size=N/A time=00:00:17.10 bitrate=N/A dup=86 drop=0 speed=1.02x    frame=  530 fps= 31 q=39.0 size=N/A time=00:00:17.63 bitrate=N/A dup=89 drop=0 speed=1.02x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_280.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  544 fps= 31 q=37.0 size=N/A time=00:00:18.13 bitrate=N/A dup=91 drop=0 speed=1.02x    frame=  560 fps= 31 q=35.0 size=N/A time=00:00:18.66 bitrate=N/A dup=94 drop=0 speed=1.02x    frame=  575 fps= 31 q=36.0 size=N/A time=00:00:19.16 bitrate=N/A dup=96 drop=0 speed=1.02x    frame=  591 fps= 31 q=37.0 size=N/A time=00:00:19.70 bitrate=N/A dup=99 drop=0 speed=1.02x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_281.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  608 fps= 31 q=33.0 size=N/A time=00:00:20.23 bitrate=N/A dup=102 drop=0 speed=1.02x    frame=  624 fps= 31 q=33.0 size=N/A time=00:00:20.76 bitrate=N/A dup=105 drop=0 speed=1.02x    frame=  638 fps= 31 q=39.0 size=N/A time=00:00:21.26 bitrate=N/A dup=107 drop=0 speed=1.02x    frame=  654 fps= 31 q=35.0 size=N/A time=00:00:21.80 bitrate=N/A dup=110 drop=0 speed=1.02x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_282.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  670 fps= 30 q=36.0 size=N/A time=00:00:22.33 bitrate=N/A dup=112 drop=0 speed=1.02x    frame=  686 fps= 31 q=38.0 size=N/A time=00:00:22.86 bitrate=N/A dup=115 drop=0 speed=1.02x    frame=  703 fps= 31 q=35.0 size=N/A time=00:00:23.40 bitrate=N/A dup=118 drop=0 speed=1.02x    frame=  720 fps= 31 q=34.0 size=N/A time=00:00:23.96 bitrate=N/A dup=121 drop=0 speed=1.02x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_283.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  734 fps= 30 q=38.0 size=N/A time=00:00:24.46 bitrate=N/A dup=123 drop=0 speed=1.01x    frame=  750 fps= 30 q=35.0 size=N/A time=00:00:25.00 bitrate=N/A dup=126 drop=0 speed=1.02x    frame=  767 fps= 31 q=34.0 size=N/A time=00:00:25.53 bitrate=N/A dup=129 drop=0 speed=1.02x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_284.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  781 fps= 30 q=44.0 size=N/A time=00:00:26.03 bitrate=N/A dup=131 drop=0 speed=1.01x    frame=  797 fps= 30 q=36.0 size=N/A time=00:00:26.56 bitrate=N/A dup=134 drop=0 speed=1.01x    frame=  812 fps= 30 q=41.0 size=N/A time=00:00:27.06 bitrate=N/A dup=136 drop=0 speed=1.01x    frame=  829 fps= 30 q=35.0 size=N/A time=00:00:27.60 bitrate=N/A dup=139 drop=0 speed=1.01x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_285.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  844 fps= 30 q=38.0 size=N/A time=00:00:28.13 bitrate=N/A dup=142 drop=0 speed=1.01x    frame=  859 fps= 30 q=35.0 size=N/A time=00:00:28.63 bitrate=N/A dup=144 drop=0 speed=1.01x    frame=  875 fps= 30 q=37.0 size=N/A time=00:00:29.16 bitrate=N/A dup=147 drop=0 speed=1.01x    frame=  892 fps= 30 q=39.0 size=N/A time=00:00:29.70 bitrate=N/A dup=150 drop=0 speed=1.01x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_286.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  908 fps= 30 q=36.0 size=N/A time=00:00:30.23 bitrate=N/A dup=153 drop=0 speed=1.01x    frame=  923 fps= 30 q=35.0 size=N/A time=00:00:30.73 bitrate=N/A dup=155 drop=0 speed=1.01x    frame=  937 fps= 30 q=42.0 size=N/A time=00:00:31.23 bitrate=N/A dup=157 drop=0 speed=1.01x    frame=  953 fps= 30 q=38.0 size=N/A time=00:00:31.76 bitrate=N/A dup=160 drop=0 speed=1.01x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_287.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame=  969 fps= 30 q=36.0 size=N/A time=00:00:32.30 bitrate=N/A dup=163 drop=0 speed=1.01x    frame=  986 fps= 30 q=35.0 size=N/A time=00:00:32.83 bitrate=N/A dup=166 drop=0 speed=1.01x    frame= 1001 fps= 30 q=39.0 size=N/A time=00:00:33.33 bitrate=N/A dup=168 drop=0 speed=1.01x    frame= 1016 fps= 30 q=35.0 size=N/A time=00:00:33.86 bitrate=N/A dup=171 drop=0 speed=1.01x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_288.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
frame= 1031 fps= 30 q=36.0 size=N/A time=00:00:34.36 bitrate=N/A dup=173 drop=0 speed=1.01x    frame= 1047 fps= 30 q=40.0 size=N/A time=00:00:34.90 bitrate=N/A dup=176 drop=0 speed=1.01x    [hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3_segment_289.ts' for writing
[hls @ 0x58051d3f3940] Opening 'hls/stream3/stream3.m3u8.tmp' for writing
[out#0/hls @ 0x58051d38f4c0] video:9583kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: unknown
frame= 1054 fps= 30 q=40.0 Lsize=N/A time=00:00:35.10 bitrate=N/A dup=177 drop=0 speed=1.01x    
[libx264 @ 0x58051d3d7840] frame I:36    Avg QP:33.75  size:107676
[libx264 @ 0x58051d3d7840] frame P:1018  Avg QP:36.89  size:  5831
[libx264 @ 0x58051d3d7840] mb I  I16..4: 100.0%  0.0%  0.0%
[libx264 @ 0x58051d3d7840] mb P  I16..4:  1.3%  0.0%  0.0%  P16..4: 13.2%  0.0%  0.0%  0.0%  0.0%    skip:85.5%
[libx264 @ 0x58051d3d7840] coded y,uvDC,uvAC intra: 42.0% 21.0% 3.7% inter: 4.3% 2.6% 0.0%
[libx264 @ 0x58051d3d7840] i16 v,h,dc,p: 26% 35% 28% 11%
[libx264 @ 0x58051d3d7840] i8c dc,h,v,p: 70% 16% 11%  3%
[libx264 @ 0x58051d3d7840] kb/s:2234.26
Exiting normally, received signal 2.
 || stream.go
2025-04-11 12:48:47	||INFO|| main || Configuration loaded successfully || main.go
2025-04-11 12:48:47	||INFO|| main || Connected to database || main.go
2025-04-11 12:48:47	||INFO|| runServer || Starting server on port 8080 || main.go
2025-04-11 12:48:52	||INFO|| Request || Received POST request for /start-stream from [::1]:58764 || middleware.go
2025-04-11 12:48:52	||INFO|| StartStreamHandler || Received request to start stream stream3 with URL rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 || handlers.go
2025-04-11 12:48:52	||INFO|| ProcessStream || Starting to process RTSP stream: rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 || rtsp.go
2025-04-11 12:48:54	||INFO|| StartStreamHandler || Started processing stream: rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 || handlers.go
2025-04-11 12:48:54	||INFO|| Request || Completed POST /start-stream in 2.000515123s || middleware.go
2025-04-11 12:48:55	||INFO|| ProcessStream || Stream info: hasVideo=true, hasAudio=false || rtsp.go
2025-04-11 12:48:55	||INFO|| ProcessStream || Checking database connection before saving metadata || rtsp.go
2025-04-11 12:48:55	||INFO|| ProcessStream || Saving stream metadata for streamID stream3 || rtsp.go
2025-04-11 12:48:55	||INFO|| SaveStreamMetadata || Stream metadata saved for stream ID: stream3 || storage.go
2025-04-11 12:48:55	||INFO|| ProcessStream || Stream metadata saved successfully || rtsp.go
2025-04-11 12:48:55	||INFO|| ProcessStream || Saving processing log for streamID stream3 || rtsp.go
2025-04-11 12:48:55	||INFO|| SaveProcessingLog || Processing log saved for stream ID: stream3 || storage.go
2025-04-11 12:48:55	||INFO|| ProcessStream || Processing log saved successfully || rtsp.go
2025-04-11 12:48:55	||INFO|| ProcessStream || FFmpeg command: ffmpeg -fflags +genpts+discardcorrupt -use_wallclock_as_timestamps 1 -rtsp_transport tcp -buffer_size 8192k -rtsp_flags prefer_tcp -timeout 5000000 -i rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 -c:v libx264 -preset ultrafast -tune zerolatency -profile:v baseline -level 3.0 -r 30 -g 30 -keyint_min 30 -b:v 2000k -maxrate 2500k -minrate 1500k -bufsize 3000k -pix_fmt yuv420p -vsync 1 -avoid_negative_ts 1 -x264-params no-scenecut=1:bframes=0 -sc_threshold 0 -map 0:v:0 -f hls -hls_time 2 -hls_list_size 0 -hls_flags append_list+discont_start+split_by_time -hls_segment_type mpegts -hls_segment_filename hls/stream3/stream3_segment_%03d.ts -hls_init_time 0 -mpegts_flags +resend_headers -pat_period 0.1 -sdt_period 0.1 hls/stream3/stream3.m3u8 || rtsp.go
2025-04-11 12:48:57	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:49:02	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:49:07	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:49:12	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:49:17	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:49:22	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:49:27	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:49:32	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:49:37	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:49:42	||INFO|| UpdateStreamMetadataStatus || Stream metadata duration updated for stream ID: stream3 || storage.go
2025-04-11 12:49:44	||INFO|| Request || Received POST request for /stop-stream from [::1]:41612 || middleware.go
2025-04-11 12:49:44	||INFO|| SaveArchiveEntry || Archive entry saved for stream ID: stream3 || storage.go
2025-04-11 12:49:44	||INFO|| StopStreamHandler || Stopped stream: stream3 || handlers.go
2025-04-11 12:49:44	||INFO|| Request || Completed POST /stop-stream in 1.016323ms || middleware.go
2025-04-11 13:59:10	||INFO|| main || Received shutdown signal, shutting down server... || main.go
2025-04-11 13:59:10	||INFO|| main || Server shut down gracefully || main.go
2025-04-11 13:59:12	||INFO|| main || Configuration loaded successfully || main.go
2025-04-11 13:59:12	||INFO|| main || Connected to database || main.go
2025-04-11 13:59:12	||INFO|| runServer || Starting server on port 8080 || main.go
2025-04-11 13:59:17	||INFO|| Request || Received POST request for /start-stream from [::1]:47848 || middleware.go
2025-04-11 13:59:17	||INFO|| StartStreamHandler || Received request to start stream stream3 with URL rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 (stream_id: d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917) || handlers.go
2025-04-11 13:59:17	||INFO|| ProcessStream || Starting to process RTSP stream: rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 || rtsp.go
2025-04-11 13:59:19	||INFO|| StartStreamHandler || Started processing stream: rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 (stream_id: d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917) || handlers.go
2025-04-11 13:59:19	||INFO|| Request || Completed POST /start-stream in 2.000305483s || middleware.go
2025-04-11 13:59:21	||INFO|| extractFirstFrame || Successfully extracted first frame to data/hls/d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917/preview.jpg || rtsp.go
2025-04-11 13:59:21	||ERROR|| ProcessStream || Failed to save preview log: ERROR: insert or update on table "processing_logs" violates foreign key constraint "fk_stream_id" (SQLSTATE 23503) || rtsp.go
2025-04-11 13:59:22	||INFO|| ProcessStream || Stream info: hasVideo=true, hasAudio=false || rtsp.go
2025-04-11 13:59:22	||INFO|| ProcessStream || Checking database connection before saving metadata || rtsp.go
2025-04-11 13:59:22	||INFO|| ProcessStream || Saving stream metadata for streamID d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917 || rtsp.go
2025-04-11 13:59:22	||INFO|| ProcessStream || Stream metadata saved successfully || rtsp.go
2025-04-11 13:59:22	||INFO|| ProcessStream || Saving processing log for streamID d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917 || rtsp.go
2025-04-11 13:59:22	||INFO|| ProcessStream || Processing log saved successfully || rtsp.go
2025-04-11 13:59:22	||INFO|| ProcessStream || FFmpeg command: ffmpeg -fflags +genpts+discardcorrupt -use_wallclock_as_timestamps 1 -rtsp_transport tcp -buffer_size 8192k -rtsp_flags prefer_tcp -timeout 5000000 -i rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 -c:v libx264 -preset ultrafast -tune zerolatency -profile:v baseline -level 3.0 -r 30 -g 30 -keyint_min 30 -b:v 2000k -maxrate 2500k -minrate 1500k -bufsize 3000k -pix_fmt yuv420p -vsync 1 -avoid_negative_ts 1 -x264-params no-scenecut=1:bframes=0 -sc_threshold 0 -map 0:v:0 -f hls -hls_time 2 -hls_list_size 0 -hls_flags append_list+discont_start+split_by_time -hls_segment_type mpegts -hls_segment_filename data/hls/d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917/d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917_segment_%03d.ts -hls_init_time 0 -mpegts_flags +resend_headers -pat_period 0.1 -sdt_period 0.1 data/hls/d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917/.m3u8 || rtsp.go
2025-04-11 14:00:32	||INFO|| Request || Received POST request for /stop-stream from [::1]:54976 || middleware.go
2025-04-11 14:00:32	||INFO|| ProcessStream || Received cancellation, sending 'q' to FFmpeg for stream d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917 || rtsp.go
2025-04-11 14:00:32	||INFO|| StopStreamHandler || Stopped stream: stream3 (stream_id: d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917) || handlers.go
2025-04-11 14:00:32	||INFO|| Request || Completed POST /stop-stream in 1.024709ms || middleware.go
2025-04-11 14:00:32	||INFO|| ProcessStream || FFmpeg completed gracefully after 'q' || rtsp.go
2025-04-11 14:00:32	||INFO|| ProcessStream || FFmpeg recording process for stream d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917 completed || rtsp.go
2025-04-11 14:00:32	||INFO|| ProcessStream || Proceeding with post-processing for streamID d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917 || rtsp.go
2025-04-11 14:00:32	||INFO|| ProcessStream || Starting Merkle tree construction for HLS segments of streamID d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917 || rtsp.go
2025-04-11 14:00:32	||INFO|| ProcessStream || Preparing to save HLS Merkle proofs for streamID d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917 || rtsp.go
2025-04-11 14:00:32	||INFO|| ProcessStream || HLS generated at data/hls/d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917/.m3u8 for streamID d4d3c435-e861-4a22-b6e8-4ed8b3e63b07_stream3_20250411135917 || rtsp.go
2025-04-11 14:00:32	||INFO|| ProcessStream || Successfully processed RTSP stream: rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 || rtsp.go
2025-04-11 14:02:19	||INFO|| Request || Received POST request for /start-stream from [::1]:48968 || middleware.go
2025-04-11 14:02:19	||INFO|| StartStreamHandler || Received request to start stream stream3 with URL rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 (stream_id: 9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219) || handlers.go
2025-04-11 14:02:19	||INFO|| ProcessStream || Starting to process RTSP stream: rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 || rtsp.go
2025-04-11 14:02:21	||INFO|| StartStreamHandler || Started processing stream: rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 (stream_id: 9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219) || handlers.go
2025-04-11 14:02:21	||INFO|| Request || Completed POST /start-stream in 2.000932464s || middleware.go
2025-04-11 14:02:23	||INFO|| extractFirstFrame || Successfully extracted first frame to data/hls/9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219/preview.jpg || rtsp.go
2025-04-11 14:02:23	||ERROR|| ProcessStream || Failed to save preview log: ERROR: insert or update on table "processing_logs" violates foreign key constraint "fk_stream_id" (SQLSTATE 23503) || rtsp.go
2025-04-11 14:02:24	||INFO|| ProcessStream || Stream info: hasVideo=true, hasAudio=false || rtsp.go
2025-04-11 14:02:24	||INFO|| ProcessStream || Checking database connection before saving metadata || rtsp.go
2025-04-11 14:02:24	||INFO|| ProcessStream || Saving stream metadata for streamID 9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219 || rtsp.go
2025-04-11 14:02:24	||INFO|| ProcessStream || Stream metadata saved successfully || rtsp.go
2025-04-11 14:02:24	||INFO|| ProcessStream || Saving processing log for streamID 9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219 || rtsp.go
2025-04-11 14:02:24	||INFO|| ProcessStream || Processing log saved successfully || rtsp.go
2025-04-11 14:02:24	||INFO|| ProcessStream || FFmpeg command: ffmpeg -fflags +genpts+discardcorrupt -use_wallclock_as_timestamps 1 -rtsp_transport tcp -buffer_size 8192k -rtsp_flags prefer_tcp -timeout 5000000 -i rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 -c:v libx264 -preset ultrafast -tune zerolatency -profile:v baseline -level 3.0 -r 30 -g 30 -keyint_min 30 -b:v 2000k -maxrate 2500k -minrate 1500k -bufsize 3000k -pix_fmt yuv420p -vsync 1 -avoid_negative_ts 1 -x264-params no-scenecut=1:bframes=0 -sc_threshold 0 -map 0:v:0 -f hls -hls_time 2 -hls_list_size 0 -hls_flags append_list+discont_start+split_by_time -hls_segment_type mpegts -hls_segment_filename data/hls/9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219/9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219_segment_%03d.ts -hls_init_time 0 -mpegts_flags +resend_headers -pat_period 0.1 -sdt_period 0.1 data/hls/9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219/.m3u8 || rtsp.go
2025-04-11 14:03:01	||INFO|| Request || Received POST request for /stop-stream from [::1]:44040 || middleware.go
2025-04-11 14:03:01	||INFO|| ProcessStream || Received cancellation, sending 'q' to FFmpeg for stream 9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219 || rtsp.go
2025-04-11 14:03:01	||INFO|| StopStreamHandler || Stopped stream: stream3 (stream_id: 9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219) || handlers.go
2025-04-11 14:03:01	||INFO|| Request || Completed POST /stop-stream in 824.543µs || middleware.go
2025-04-11 14:03:01	||INFO|| ProcessStream || FFmpeg completed gracefully after 'q' || rtsp.go
2025-04-11 14:03:01	||INFO|| ProcessStream || FFmpeg recording process for stream 9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219 completed || rtsp.go
2025-04-11 14:03:01	||INFO|| ProcessStream || Proceeding with post-processing for streamID 9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219 || rtsp.go
2025-04-11 14:03:01	||INFO|| ProcessStream || Starting Merkle tree construction for HLS segments of streamID 9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219 || rtsp.go
2025-04-11 14:03:01	||INFO|| ProcessStream || Preparing to save HLS Merkle proofs for streamID 9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219 || rtsp.go
2025-04-11 14:03:01	||INFO|| ProcessStream || HLS generated at data/hls/9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219/.m3u8 for streamID 9b12a5d5-5171-4e75-8df3-cfac6da9cbd2_stream3_20250411140219 || rtsp.go
2025-04-11 14:03:01	||INFO|| ProcessStream || Successfully processed RTSP stream: rtsp://admin:1234Qwer@192.168.21.10:554/Streaming/Channels/101 || rtsp.go
